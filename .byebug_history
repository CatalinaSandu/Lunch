q
session[:fb_token]
session
c
fb_session_key
c
fb_api_key
n
session[:fb_token]
c
session[:fb_token]
n
c
n
c
n
fb_session_key = split_token[1]
fb_api_key = split_token[0]
split_token = session[:fb_token].split("|")
session[:fb_token]
c
request.env["omniauth.auth"]
session[:fb_token]
session
c
data["email"]
data
data = session["devise.facebook_data"] && session["devise.facebook_data"]["extra"]["raw_info"]
session["devise.facebook_data"] && session["devise.facebook_data"]["extra"]["raw_info"]
params
c
n
omniauth.auth
n
c
user.email.blank?
data["email"]
user.email
n
c
n
c
n
session["devise.facebook_data"]["extra"]["raw_info"]
session["devise.facebook_data"]["extra"["raw_info"]
session["devise.facebook_data"]
devise.facebook_data
super
c
n
user.name
n
user.password
n
user.email
n
auth.info.email
n
user.uid
n
user.provider
n
auth
c
n
c
n
c
user.provider
n
auth.uid
auth.uit
auth.provider
c
n
c
n
@user
n
auth
c
User.find_by_uid 128106327652363
n
c
@user.persisted?
@user.email = "katy_sandu94@yahoo.com"
@user.persisted?
n
@user
n
c
x
n
user
n
user
n
c
n
order
n
order
n
user
n
token
n
c
orders
n
date
n
date
c
orders
n
date
n
c
n
menus
c
@user[:password]
@user
c
n
c
"user_email"
user_email
c
user_email
n
@user[:email]
@user[:email
@user[:password]
c
n
c
n
c
@dishes
c
n
@dishes.select { |d| d.dish_type == 'First' }.map { |d| [d.dish_title, d.id] }
@dishes.select { |d| d.dish_type == 'First' }.map { |d| [d.dish_title, d.id] })
c
n
@dishes.select {|d| d.dish_type == 'First'}, :id, :dish_title 
@dishes.select {|d| d.dish_type == 'First'}, :id, :dish_title %>
@dishes
n
c
n
c
n
@menus.first
@dishes
n
@menus
n
@order
n
c
n
c
n
menus
c
menu_array
c
x
:title
title
first_dish
n
c
n
menu
n
c
n
menu
n
c
Order.where(user_id: user.id)
Order.where(user_id: user.id).first!
n
c
User.find_by_authentification_token(params[:token])
user
n
token
n
c
n
avatar
n
c
n
order
oder
n
c
Order.where(dish1_id: dish1_id, dessert_id: dessert_id).first!
n
menu
n
c
Order.where(dish1_id: dish1_id, dessert_id: dessert_id).first!
n
menu
n
c
dessert_id
Order.where(dish1_id: dish1_id, dessert_id: dessert_id).first!
n
menu
n
c
n
menu
n
menu
n
menu_id
menu_if
menu
n
c
menu.dishes.second.id
dish2_id
c
menu_id
menu
n
c
@order
menu_id
c
n
c
"http://#{request.host_with_port}#{user.avatar.url}"
n
request.host_with_port
c
request.url
"#{RAILS_ROOT}/public/#{user.avatar.url}"
user.avatar.url
user.avatar
n
c
n
c
n
c
permitted_params
